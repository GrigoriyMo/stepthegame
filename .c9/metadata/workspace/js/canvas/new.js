{"filter":false,"title":"new.js","tooltip":"/js/canvas/new.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":443,"column":1},"action":"insert","lines":["   //i don't know, what are you doing here......//////////////////////","window.onkeydown    =  floControl;","window.onkeyup      =  floControl_2;","const LEFTWALL      = 0,                           //граница левой стороны игрового поля","    RIGHTWALL       = 570,                          //граница правой стороны игрового поля  ","    SPAWN           = [0,40,80,120,160,200,240,280,320,360,400,440,500,540];  //позиции для рождения по горизонтали","  ","","  var spawnInterval = null,","  ms                = null, ","  pos               = 0,                      ","  posStep           = 0,","  stepDown          = 0,","  poss              = null,","  errorsLeft        = null,","  txtErrors         = 0,","  score             = null,","  txtScore          = 0,","  stepImg           ='url(../pics/can.gif)',","  floRight          ='../pics/right.png',","  floLeft          ='../pics/left.png',","  flo               = document.getElementById('flo'),","  gameStarted       = false,","  step              = null,","  k                 = null,","  id                = 0,","  interval          = null,","  intervalSpawn     = null,","  intervalFly       = null,","  intervalF         = null,","  gOInterval        = null,","  intervalCatchCheck= null,","  intervalMeow      = null,","  intervalMeow2     = null,","  npcs              = [],","  npc               = null,","  spawned           = null,","  timer             = null,","  flag              = null,","  mil               = null,","  sec               = null,","  min               = null,","  hours             = null,","  speed             = null;","","","/////////////////////////////////////////////////////////////////// ARRAYSHUFFLE FUNCTION;","function arrayShuffle(a){","  if(a.length == 1) return this;","  for(var j, x, i = a.length; i; j = Math.floor(Math.random() * i), x = a[--i], a[i] = a[j], a[j] = x);","}","/////////////////////////////////////////////////////////////////// KEYBOARD CONTROLS FUNCTION;","function floControl(e){","var flo = document.getElementById('flo');","var meow = document.getElementsByClassName('meowBar')[0];","","if(e.keyCode===37 && e.which===37)      "," {"," //alert('left');",""," flo.className ='floleft';"," poss          = pos-=6;"," flo.style.left= pos+\"px\";"," meow.style.left= pos+\"px\";",""," console.log(\"left move <------ \" + pos);",""," }","else if (e.keyCode===39 && e.which===39)"," //alert('right');"," {"," flo.className ='floright';"," this.poss          = pos+=6;"," flo.style.left= pos+\"px\";"," meow.style.left= pos+\"px\";"," "," console.log(\"right move ------>\" + pos);",""," }","setInterval(function(){","  if(pos<LEFTWALL)","  {","  pos            = LEFTWALL;","  flo.style.left = pos+\"px\";","  meow.style.left = pos+\"px\";","  }","  else if(pos>RIGHTWALL)","  {","  pos            = RIGHTWALL;","  flo.style.left = pos+\"px\";","  meow.style.left = pos+\"px\";","  }","},500);","","","}","","function floControl_2(e){","  var flo = document.getElementById('flo');","  if(e.keyCode===37 && e.which===37){","    flo.className='flo';","  }else if(e.keyCode===39 && e.which===39)","  {","    flo.className='flo';  ","  }","}","/////////////////////////////////////////////////////////////////// NEW GAME FUNCTION;","function newGame (){","  if(cat = document.getElementById('flo')){","    playArea.removeChild(cat);","    console.log('cat cleared');","    kohska = new floObject();","    kohska.newCat();","  }else{","  kohska = new floObject();","  kohska.newCat();","  }","  var flo            = document.getElementById('flo');","  txtErrors          = 0;","  errors.textContent = txtErrors;","  txtScore           = 0;","  score.textContent  = txtScore;","  stepDown           = 0;","  id                 = 1;","  clearInterval(intervalCatchCheck);","  clearInterval(spawnInterval);","  clearSteps();","  step               = null;","  pos                = 0;","  flo.style.left     = pos+\"px\";","  gameStarted        = true;","  spawnStep();","  catchedStep();","  clearCatched();","  clearMissed();","  deleteInactiveOne();","  deleteInactiveTwo();","  gameOver();","  meowMeow();","  //gotIt()","","  }","///////////////////////////////////////////////////////////////////","","/////////////////////////////////////////////////////////////////// CATCH FUNCTION;","function catchedStep(){","","var flo = document.getElementById('flo');","var steps = document.getElementsByClassName('step');","","intervalCatchCheck = setInterval(function(){","  if(steps.length>0){","  for(k=0;k<steps.length;k++){","  if(steps[k].style.marginTop === flo.style.marginTop && steps[k].style.left === flo.style.left){","    ","    //alert(steps[k].style.marginTop +\"==\" +flo.style.marginTop + 'STEP CATCHED' + steps[k].id);","    txtScore++;","    score.textContent = txtScore;","    steps[k].className = 'catchedstep';","     setTimeout(function(){","      flo.className = 'flocatch';","    },1);","    setTimeout(function(){","      flo.className = 'flo';","    },500);","    ","    ","    }","    ","}} else {","  return false; //game over","}},1);","}","/////////////////////////////////////////////////////////////////// OK CLEAR STEPS FUNCTION;","function clearSteps(){","  ","  var steps = document.getElementsByClassName('step');","  for (i=0;i < steps.length;i++){","    playArea.removeChild(steps[i]);","    for(j=0; j < steps.length; i++){","      playArea.removeChild(steps[j]);","    }","  }","}","/////////////////////////////////////////////////////////////////// OBJ(STEPS СОЗДАНИЕ);","function stepObject(id){","var stepDown = 0;","var step     = document.createElement('div');","var playArea = document.getElementById('playArea');","var speed = 10; //NEW","this.id      = id;","function build(){","  step.style.height     ='50px';","  step.style.width      ='40px';","  step.style.display    ='block';","  step.style.position   ='absolute';","  step.setAttribute('class','step');","  step.setAttribute('id',id);","  arrayShuffle(SPAWN);","  posStep               = SPAWN[0];","  step.style.left       = posStep;","  step.style.marginTop  = '0px';","  if(playArea.appendChild(step))","    {console.log('# '+ id + ' created');","      console.log(\"style.left is: \" + step.style.left.replace(/[^0-9]/g, ''));","    }"," }","function move(){"," ms = setInterval (function(){","   ","    stepDown = stepDown + 1;","    step.style.marginTop = stepDown+'px';","    if(stepDown>800 && step.className=='step'){","      txtErrors++;","      errors.textContent = txtErrors;","      step.className = 'missed'","    }","    ","    //console.log(\"gorizontPosition is : \" + this.gorizontPosition);","    //alert(stepDown);","  },speed);"," }","this.run = function(){","  build();","  move();",""," }","}","/////////////////////////////////////////////////////////////////// FLO & BAR CLASS FUNCTION;","function floObject(){","  var cat = document.createElement('div');","  var meow = document.createElement('div');","  var playArea = document.getElementById('playArea');","  function buil(){","    cat.setAttribute('class','flo'); ","    cat.setAttribute('id','flo');","    cat.style.marginTop = '730px';","    playArea.appendChild(cat);","    console.log(\"cat created ;\")","    meow.setAttribute('class','meowBar');","    playArea.appendChild(meow);","    }","    this.newCat = function(){","    buil();","  }","}","/////////////////////////////////////////////////////////////////// STEPS SPAWN FUNCTION;","function spawnStep(){","  spawned = true;","","  //if (gameStarted)","  spawnInterval = setInterval(function()","  {","  var steps = document.getElementsByClassName('step');","  objName = new stepObject(id);","  npcs.push(objName);","  id++;","  objName.run();","  ","  if(steps.length>5){","    clearInterval(spawnInterval)","  }","},4000);","","  }","  ","","///////////////////////////////////////////////////////////////////","function meowMeow(){","  var flo = document.getElementById('flo');","  var steps = document.getElementsByClassName('step');","  var meow = document.getElementsByClassName('meowBar')[0];","  intervalMeow = setInterval(function(){","    if(steps.length>0){","      for(k=0;k<steps.length;k++){","        if(steps[k].style.left === flo.style.left){","        console.log('MEOW MEOW MOEW ');","        meow.style.display='block';","        setTimeout(function(){","          meow.style.display='none';","        ","        },400);","      }","    }","  }},0.5);","}","","/*  intervalMeow2 = setInterval(function(){","    if(steps.length>0){","      for(k=0;k<steps.length;k++){","        if(steps[k].style.right === flo.style.right)","        console.log('MEOW MEOW MOEW ');","      }","    }","  },100);","*/","///////////////////////////////////////////////////////////////////","function gotIt(){","var flo = document.getElementById('flo');","var steps = document.getElementsByClassName('step');","setInterval(function(){","  if(steps.length>0){","  for(k=0;k<steps.length;k++){","  var left_position = steps[k].style.left.replace(/[^0-9]/g, '');","  console.log(left_position);","  console.log(\"Flo left is: \" + flo.style.left.replace(/[^0-9]/g, ''));","  console.log(\"Flo right is: \" + flo.style.right.replace(/[^0-9]/g, ''));","    }","      }","  },1000);","}","///////////////////////////////////////////////////////////////////","function clearCatched(){","  var clearCatchedInterval = setInterval(function ()","  {","    var cStep = document.getElementsByClassName('catchedstep');","    for(k=0;k<cStep.length;k++)","    cStep[k].style.display='none';","","},","1)","  ;}","","function clearMissed(){","  var clearCatchedInterval = setInterval(function ()","  {","    var mStep = document.getElementsByClassName('missed');","    for(k=0;k<mStep.length;k++)","    mStep[k].style.display='none';","    ","},","1)","  ;}","function deleteInactiveOne(){","  var deleteInactiveStepsInterval = setInterval(function ()","  {","    var inactiveStepsOne = document.getElementsByClassName('missed');","    for(v=0;v<inactiveStepsOne.length;v++){","      playArea.removeChild(inactiveStepsOne[v]);","","    }","  },3000);","}","","function deleteInactiveTwo(){","  var deleteInactiveStepsInterval = setInterval(function ()","  {","    var inactiveStepsOne = document.getElementsByClassName('catchedstep');","    for(v=0;v<inactiveStepsOne.length;v++){","      playArea.removeChild(inactiveStepsOne[v]);","","    }","  },3000);","}","","///////////////////////////////////////////////////////////////////TIMER ","","// Get Date start point","function startStopwatch() {","  flag = true;","  initialDate = new Date;","}","","// calculate timer","function getTime() {","","  var currentDate = new Date;","  timer = new Date (currentDate - initialDate);","  ","  milliseconds = timer.getMilliseconds();","  seconds = timer.getSeconds();","  minutes = timer.getMinutes();","  hours = timer.getUTCHours();","","  if(milliseconds < 100){","    milliseconds = '0' + milliseconds;","  }","  if(seconds < 10){","    seconds = '0' + seconds;","  }","  if (minutes < 10){","    minutes = '0' + minutes;","  }","  if (hours < 10){","    hours = '0' + hours;","  }","}","// display timer in document","function counter() {","  getTime();","  mil.innerHTML   = milliseconds;","  sec.innerHTML   = seconds;","  min.innerHTML   = minutes;","  hours.innerHTML = hours;","}","// interval for display","function displayTimer() {","  timerId = setInterval(counter, 10);","}","///////////////////////////////////////////////////////////////////","function gameOver(){","  gOInterval = setInterval(function(){","    if(txtErrors>20){","     document.location.href=\"credits_add.php\"+\"?u_score=\"+txtScore+\"\"","     +\"&hours=\"+hours+","     \"&min=\"+ minutes +\"\" +","     \"&sec=\"+seconds + ","     \"&msecs=\"+milliseconds;","    }","  },1000);","}","///////////////////","","function clearIntervals (){","    clearInterval(spawnInterval);","    clearInterval(ms);","    console.log('STOP');","}","","","/////////////////////////////////////////////////////////////////// WINDOW ONLOAD FUNCTION;","window.onload         = function(){","  mil             = document.querySelector('.milis');","  sec             = document.querySelector('.secs');","  min             = document.querySelector('.mins');","  hours           = document.querySelector('.hours');","  flag            = false;","","  var flo             = document.getElementById('flo');","  var playArea        = document.getElementById('playArea');","","  document.getElementsByTagName('button')[0].addEventListener('click',newGame);","  //document.getElementsByClassName('stop')[0].addEventListener('click',clearIntervals);","","  //timer activating","  document.getElementsByTagName('button')[0].addEventListener('click',displayTimer);","  document.getElementsByTagName('button')[0].addEventListener('click', startStopwatch);","","  errors              = document.getElementById('errors');","  errors.textContent  = txtErrors;","  score               = document.getElementById('score');","  score.textContent   = txtScore;","  //flo.style.marginTop = '730px';","}"],"id":1}]]},"ace":{"folds":[],"scrolltop":4070,"scrollleft":0,"selection":{"start":{"row":266,"column":0},"end":{"row":266,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":253,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1520884101304,"hash":"ffcb1b261a08cc433478b6d9bf9557695bdcd9f7"}